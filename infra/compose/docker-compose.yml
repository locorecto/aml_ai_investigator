services:
  api:
    build:
      context: ../..
      dockerfile: infra/docker/backend/Dockerfile
    ports:
      - "8000:8000"
    environment:
      DATA_BASE_PATH: /data
      LOG_LEVEL: INFO
      LLM_API_KEY: ${LLM_API_KEY:-}
      LLM_BASE_URL: ${LLM_BASE_URL:-https://api.openai.com/v1}
      LLM_MODEL: ${LLM_MODEL:-gpt-5}
      ARTIFACTS_PATH: /artifacts
    volumes:
      - ../../data:/data:ro
      - ../../artifacts:/artifacts:rw
  scheduler:
    build:
      context: ../..
      dockerfile: infra/docker/scheduler/Dockerfile
    environment:
      DATA_BASE_PATH: /data
    volumes:
      - ../../data:/data:rw
